<html>
<body>
<meta charset="utf-8" />
<title>TestChart</title>
<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet"> 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<canvas id="canv" style="width:700px;height:700px;border:1px solid black;">

</canvas>
<button onclick="dosome()" class="btn btn-primary btn-lg">2Image</button>

<script>
var canvas = document.getElementById("canv");
var ctx = canvas.getContext('2d');
canvas.width=2000
canvas.height=2000

function getRandomInt(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min)) + min;
}

function writeCNN(p,wid,hei,nlayer){
  var names = ["CnnRed.png","CnnYellow.png","CnnBlue.png","CnnGreen.png"]
  var img = new Image()
  img.addEventListener('load', function() {
    ctx.drawImage(img,p[0],p[1],300,300)
  });
  
  var c = getRandomInt(0,4)
  img.src = "./imgs/"+names[c]
  
  
  ctx.font = '40px Roboto '
  ctx.fillText(String(wid),p[0]+110,p[1]+380) //width text
  ctx.fillText(String(hei),p[0]-80,p[1]+170) //length text
}
function connectCNN(pos_one,pos_two){
		ctx.beginPath()
		ctx.strokeStyle = "#FFEB00"
		ctx.moveTo(pos_one[0],pos_one[1]+300)
		ctx.lineTo(pos_two[0]+20,pos_two[1]+150)
		
		ctx.moveTo(pos_one[0]+270,pos_one[1]+300)
		ctx.lineTo(pos_two[0]+294,pos_two[1]+2)
		
		ctx.lineWidth=5
		ctx.stroke()
}
a = [200,200]
b = [200,600]
c = [200,1000]
writeCNN(a,40,40,17)
writeCNN(b,40,40,17)
writeCNN(c,17,17,17)
connectCNN(a,b)
connectCNN(b,c)


/Button
function dosome(){
var img = canvas.toDataURL('image/png')//.replace('image/png','image-octet-stream');
window.location.href=img;
}
</script>
</body>
</html>
